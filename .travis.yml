language: go
dist: trusty

os:
  - linux

go:
  - 1.8.x
  - 1.9.2

env:
  - COVERALLS_TOKEN=4jtI1GlvWFpvY5KYoHzlMWDbNYM6hypCW

script:
  - go test -race -v ./...
  - ./coveralls.bash

before_install:
  - go get github.com/mattn/goveralls
  - go get github.com/modocache/gover
  - go vet ./...

install:
  - export CI=TRAVIS
  - go get ./...

script:
  - travis_retry go test -timeout 20m -v ./...
  - chmod +x coveralls.bash
  - ./coveralls.bash
